(function(D,v){typeof exports=="object"&&typeof module<"u"?v(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],v):(D=typeof globalThis<"u"?globalThis:D||self,v(D.index={},D.Vue))})(this,function(D,v){"use strict";const xt={modelValue:{type:Boolean,default:!1},hostDom:{type:Object,default:null},title:{type:String,default:""},showArrow:{type:Boolean,default:!0},placement:{type:String,default:"bottom"}};function $(t){return t.split("-")[1]}function K(t){return t==="y"?"height":"width"}function H(t){return t.split("-")[0]}function _(t){return["top","bottom"].includes(H(t))?"x":"y"}function nt(t,e,o){let{reference:n,floating:a}=t;const r=n.x+n.width/2-a.width/2,i=n.y+n.height/2-a.height/2,l=_(e),f=K(l),c=n[f]/2-a[f]/2,u=l==="x";let s;switch(H(e)){case"top":s={x:r,y:n.y-a.height};break;case"bottom":s={x:r,y:n.y+n.height};break;case"right":s={x:n.x+n.width,y:i};break;case"left":s={x:n.x-a.width,y:i};break;default:s={x:n.x,y:n.y}}switch($(e)){case"start":s[l]-=c*(o&&u?-1:1);break;case"end":s[l]+=c*(o&&u?-1:1)}return s}const vt=async(t,e,o)=>{const{placement:n="bottom",strategy:a="absolute",middleware:r=[],platform:i}=o,l=r.filter(Boolean),f=await(i.isRTL==null?void 0:i.isRTL(e));let c=await i.getElementRects({reference:t,floating:e,strategy:a}),{x:u,y:s}=nt(c,n,f),d=n,p={},w=0;for(let m=0;m<l.length;m++){const{name:h,fn:y}=l[m],{x:g,y:b,data:R,reset:L}=await y({x:u,y:s,initialPlacement:n,placement:d,strategy:a,middlewareData:p,rects:c,platform:i,elements:{reference:t,floating:e}});u=g??u,s=b??s,p={...p,[h]:{...p[h],...R}},L&&w<=50&&(w++,typeof L=="object"&&(L.placement&&(d=L.placement),L.rects&&(c=L.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:a}):L.rects),{x:u,y:s}=nt(c,d,f)),m=-1)}return{x:u,y:s,placement:d,strategy:a,middlewareData:p}};function ot(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function X(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function bt(t,e){var o;e===void 0&&(e={});const{x:n,y:a,platform:r,rects:i,elements:l,strategy:f}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:s="floating",altBoundary:d=!1,padding:p=0}=e,w=ot(p),m=l[d?s==="floating"?"reference":"floating":s],h=X(await r.getClippingRect({element:(o=await(r.isElement==null?void 0:r.isElement(m)))==null||o?m:m.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:c,rootBoundary:u,strategy:f})),y=s==="floating"?{...i.floating,x:n,y:a}:i.reference,g=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),b=await(r.isElement==null?void 0:r.isElement(g))&&await(r.getScale==null?void 0:r.getScale(g))||{x:1,y:1},R=X(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:g,strategy:f}):y);return{top:(h.top-R.top+w.top)/b.y,bottom:(R.bottom-h.bottom+w.bottom)/b.y,left:(h.left-R.left+w.left)/b.x,right:(R.right-h.right+w.right)/b.x}}const Rt=Math.min,Lt=Math.max;function Tt(t,e,o){return Lt(t,Rt(e,o))}const Pt=t=>({name:"arrow",options:t,async fn(e){const{element:o,padding:n=0}=t||{},{x:a,y:r,placement:i,rects:l,platform:f,elements:c}=e;if(o==null)return{};const u=ot(n),s={x:a,y:r},d=_(i),p=K(d),w=await f.getDimensions(o),m=d==="y",h=m?"top":"left",y=m?"bottom":"right",g=m?"clientHeight":"clientWidth",b=l.reference[p]+l.reference[d]-s[d]-l.floating[p],R=s[d]-l.reference[d],L=await(f.getOffsetParent==null?void 0:f.getOffsetParent(o));let V=L?L[g]:0;V&&await(f.isElement==null?void 0:f.isElement(L))||(V=c.floating[g]||l.floating[p]);const J=b/2-R/2,k=u[h],z=V-w[p]-u[y],x=V/2-w[p]/2+J,A=Tt(k,x,z),W=$(i)!=null&&x!=A&&l.reference[p]/2-(x<k?u[h]:u[y])-w[p]/2<0;return{[d]:s[d]-(W?x<k?k-x:z-x:0),data:{[d]:A,centerOffset:x-A}}}}),Et=["top","right","bottom","left"],it=Et.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]),At={left:"right",right:"left",bottom:"top",top:"bottom"};function rt(t){return t.replace(/left|right|bottom|top/g,e=>At[e])}function Ot(t,e,o){o===void 0&&(o=!1);const n=$(t),a=_(t),r=K(a);let i=a==="x"?n===(o?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(i=rt(i)),{main:i,cross:rt(i)}}const Vt={start:"end",end:"start"};function Dt(t){return t.replace(/start|end/g,e=>Vt[e])}const $t=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var o,n,a;const{rects:r,middlewareData:i,placement:l,platform:f,elements:c}=e,{crossAxis:u=!1,alignment:s,allowedPlacements:d=it,autoAlignment:p=!0,...w}=t,m=s!==void 0||d===it?function(x,A,W){return(x?[...W.filter(P=>$(P)===x),...W.filter(P=>$(P)!==x)]:W.filter(P=>H(P)===P)).filter(P=>!x||$(P)===x||!!A&&Dt(P)!==P)}(s||null,p,d):d,h=await bt(e,w),y=((o=i.autoPlacement)==null?void 0:o.index)||0,g=m[y];if(g==null)return{};const{main:b,cross:R}=Ot(g,r,await(f.isRTL==null?void 0:f.isRTL(c.floating)));if(l!==g)return{reset:{placement:m[0]}};const L=[h[H(g)],h[b],h[R]],V=[...((n=i.autoPlacement)==null?void 0:n.overflows)||[],{placement:g,overflows:L}],J=m[y+1];if(J)return{data:{index:y+1,overflows:V},reset:{placement:J}};const k=V.map(x=>{const A=$(x.placement);return[x.placement,A&&u?x.overflows.slice(0,2).reduce((W,P)=>W+P,0):x.overflows[0],x.overflows]}).sort((x,A)=>x[1]-A[1]),z=((a=k.filter(x=>x[2].slice(0,$(x[0])?2:3).every(A=>A<=0))[0])==null?void 0:a[0])||k[0][0];return z!==l?{data:{index:y+1,overflows:V},reset:{placement:z}}:{}}}},St=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:o,y:n}=e,a=await async function(r,i){const{placement:l,platform:f,elements:c}=r,u=await(f.isRTL==null?void 0:f.isRTL(c.floating)),s=H(l),d=$(l),p=_(l)==="x",w=["left","top"].includes(s)?-1:1,m=u&&p?-1:1,h=typeof i=="function"?i(r):i;let{mainAxis:y,crossAxis:g,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return d&&typeof b=="number"&&(g=d==="end"?-1*b:b),p?{x:g*m,y:y*w}:{x:y*w,y:g*m}}(e,t);return{x:o+a.x,y:n+a.y,data:a}}}};function T(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function O(t){return T(t).getComputedStyle(t)}function lt(t){return t instanceof T(t).Node}function S(t){return lt(t)?(t.nodeName||"").toLowerCase():""}let Y;function at(){if(Y)return Y;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(Y=t.brands.map(e=>e.brand+"/"+e.version).join(" "),Y):navigator.userAgent}function E(t){return t instanceof T(t).HTMLElement}function B(t){return t instanceof T(t).Element}function st(t){return typeof ShadowRoot>"u"?!1:t instanceof T(t).ShadowRoot||t instanceof ShadowRoot}function G(t){const{overflow:e,overflowX:o,overflowY:n,display:a}=O(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(a)}function Bt(t){return["table","td","th"].includes(S(t))}function Q(t){const e=/firefox/i.test(at()),o=O(t),n=o.backdropFilter||o.WebkitBackdropFilter;return o.transform!=="none"||o.perspective!=="none"||!!n&&n!=="none"||e&&o.willChange==="filter"||e&&!!o.filter&&o.filter!=="none"||["transform","perspective"].some(a=>o.willChange.includes(a))||["paint","layout","strict","content"].some(a=>{const r=o.contain;return r!=null&&r.includes(a)})}function Z(){return/^((?!chrome|android).)*safari/i.test(at())}function tt(t){return["html","body","#document"].includes(S(t))}const ct=Math.min,N=Math.max,I=Math.round;function ft(t){const e=O(t);let o=parseFloat(e.width),n=parseFloat(e.height);const a=E(t),r=a?t.offsetWidth:o,i=a?t.offsetHeight:n,l=I(o)!==r||I(n)!==i;return l&&(o=r,n=i),{width:o,height:n,fallback:l}}function ut(t){return B(t)?t:t.contextElement}const dt={x:1,y:1};function F(t){const e=ut(t);if(!E(e))return dt;const o=e.getBoundingClientRect(),{width:n,height:a,fallback:r}=ft(e);let i=(r?I(o.width):o.width)/n,l=(r?I(o.height):o.height)/a;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}function M(t,e,o,n){var a,r;e===void 0&&(e=!1),o===void 0&&(o=!1);const i=t.getBoundingClientRect(),l=ut(t);let f=dt;e&&(n?B(n)&&(f=F(n)):f=F(t));const c=l?T(l):window,u=Z()&&o;let s=(i.left+(u&&((a=c.visualViewport)==null?void 0:a.offsetLeft)||0))/f.x,d=(i.top+(u&&((r=c.visualViewport)==null?void 0:r.offsetTop)||0))/f.y,p=i.width/f.x,w=i.height/f.y;if(l){const m=T(l),h=n&&B(n)?T(n):n;let y=m.frameElement;for(;y&&n&&h!==m;){const g=F(y),b=y.getBoundingClientRect(),R=getComputedStyle(y);b.x+=(y.clientLeft+parseFloat(R.paddingLeft))*g.x,b.y+=(y.clientTop+parseFloat(R.paddingTop))*g.y,s*=g.x,d*=g.y,p*=g.x,w*=g.y,s+=b.x,d+=b.y,y=T(y).frameElement}}return X({width:p,height:w,x:s,y:d})}function C(t){return((lt(t)?t.ownerDocument:t.document)||window.document).documentElement}function q(t){return B(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function pt(t){return M(C(t)).left+q(t).scrollLeft}function j(t){if(S(t)==="html")return t;const e=t.assignedSlot||t.parentNode||st(t)&&t.host||C(t);return st(e)?e.host:e}function mt(t){const e=j(t);return tt(e)?e.ownerDocument.body:E(e)&&G(e)?e:mt(e)}function gt(t,e){var o;e===void 0&&(e=[]);const n=mt(t),a=n===((o=t.ownerDocument)==null?void 0:o.body),r=T(n);return a?e.concat(r,r.visualViewport||[],G(n)?n:[]):e.concat(n,gt(n))}function ht(t,e,o){let n;if(e==="viewport")n=function(i,l){const f=T(i),c=C(i),u=f.visualViewport;let s=c.clientWidth,d=c.clientHeight,p=0,w=0;if(u){s=u.width,d=u.height;const m=Z();(!m||m&&l==="fixed")&&(p=u.offsetLeft,w=u.offsetTop)}return{width:s,height:d,x:p,y:w}}(t,o);else if(e==="document")n=function(i){const l=C(i),f=q(i),c=i.ownerDocument.body,u=N(l.scrollWidth,l.clientWidth,c.scrollWidth,c.clientWidth),s=N(l.scrollHeight,l.clientHeight,c.scrollHeight,c.clientHeight);let d=-f.scrollLeft+pt(i);const p=-f.scrollTop;return O(c).direction==="rtl"&&(d+=N(l.clientWidth,c.clientWidth)-u),{width:u,height:s,x:d,y:p}}(C(t));else if(B(e))n=function(i,l){const f=M(i,!0,l==="fixed"),c=f.top+i.clientTop,u=f.left+i.clientLeft,s=E(i)?F(i):{x:1,y:1};return{width:i.clientWidth*s.x,height:i.clientHeight*s.y,x:u*s.x,y:c*s.y}}(e,o);else{const i={...e};if(Z()){var a,r;const l=T(t);i.x-=((a=l.visualViewport)==null?void 0:a.offsetLeft)||0,i.y-=((r=l.visualViewport)==null?void 0:r.offsetTop)||0}n=i}return X(n)}function yt(t,e){return E(t)&&O(t).position!=="fixed"?e?e(t):t.offsetParent:null}function wt(t,e){const o=T(t);if(!E(t))return o;let n=yt(t,e);for(;n&&Bt(n)&&O(n).position==="static";)n=yt(n,e);return n&&(S(n)==="html"||S(n)==="body"&&O(n).position==="static"&&!Q(n))?o:n||function(a){let r=j(a);for(;E(r)&&!tt(r);){if(Q(r))return r;r=j(r)}return null}(t)||o}function Ct(t,e,o){const n=E(e),a=C(e),r=M(t,!0,o==="fixed",e);let i={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(n||!n&&o!=="fixed")if((S(e)!=="body"||G(a))&&(i=q(e)),E(e)){const f=M(e,!0);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else a&&(l.x=pt(a));return{x:r.left+i.scrollLeft-l.x,y:r.top+i.scrollTop-l.y,width:r.width,height:r.height}}const kt={getClippingRect:function(t){let{element:e,boundary:o,rootBoundary:n,strategy:a}=t;const r=o==="clippingAncestors"?function(c,u){const s=u.get(c);if(s)return s;let d=gt(c).filter(h=>B(h)&&S(h)!=="body"),p=null;const w=O(c).position==="fixed";let m=w?j(c):c;for(;B(m)&&!tt(m);){const h=O(m),y=Q(m);h.position==="fixed"?p=null:(w?y||p:y||h.position!=="static"||!p||!["absolute","fixed"].includes(p.position))?p=h:d=d.filter(g=>g!==m),m=j(m)}return u.set(c,d),d}(e,this._c):[].concat(o),i=[...r,n],l=i[0],f=i.reduce((c,u)=>{const s=ht(e,u,a);return c.top=N(s.top,c.top),c.right=ct(s.right,c.right),c.bottom=ct(s.bottom,c.bottom),c.left=N(s.left,c.left),c},ht(e,l,a));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:n}=t;const a=E(o),r=C(o);if(o===r)return e;let i={scrollLeft:0,scrollTop:0},l={x:1,y:1};const f={x:0,y:0};if((a||!a&&n!=="fixed")&&((S(o)!=="body"||G(r))&&(i=q(o)),E(o))){const c=M(o);l=F(o),f.x=c.x+o.clientLeft,f.y=c.y+o.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-i.scrollLeft*l.x+f.x,y:e.y*l.y-i.scrollTop*l.y+f.y}},isElement:B,getDimensions:function(t){return ft(t)},getOffsetParent:wt,getDocumentElement:C,getScale:F,async getElementRects(t){let{reference:e,floating:o,strategy:n}=t;const a=this.getOffsetParent||wt,r=this.getDimensions;return{reference:Ct(e,await a(o),n),floating:{x:0,y:0,...await r(o)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>O(t).direction==="rtl"},Wt=(t,e,o)=>{const n=new Map,a={platform:kt,...o},r={...a.platform,_c:n};return vt(t,e,{...a,platform:r})},Ft={modelValue:{type:Boolean,default:!1},hostDom:{type:Object,default:null},showArrow:{type:Boolean,default:!0},placement:{type:String,default:"bottom"}},U=v.defineComponent({name:"GBasePopOver",props:Ft,emits:["update:modalValue"],setup(t,{slots:e,attrs:o}){const{modelValue:n,hostDom:a,showArrow:r,placement:i}=v.toRefs(t),l=v.ref(),f=v.ref(),c=()=>{const s=[];r.value&&(s.push(St(8)),s.push(Pt({element:l.value}))),i.value||s.push($t()),Wt(a.value,f.value,{middleware:s,placement:i.value||"bottom"}).then(({x:d,y:p,middlewareData:w,placement:m})=>{if(Object.assign(f.value.style,{left:d+"px",top:p+"px"}),r.value){const{x:h,y}=w.arrow,g=m.split("-")[0],b={top:"bottom",bottom:"top",left:"right",right:"left"}[g],R=["top","right","bottom","left"],L=(R.indexOf(g)+4-1)%4,V=R[L];Object.assign(l.value.style,{left:h+"px",top:y+"px",[b]:"-4px",[`border-${g}-color`]:"transparent",[`border-${V}-color`]:"transparent"})}})},u=new MutationObserver(s=>{c()});return v.watch(n,s=>{s?(v.nextTick(c),a.value&&u.observe(a.value,{attributes:!0}),window.addEventListener("resize",c),window.addEventListener("scroll",c)):(u.disconnect(),window.removeEventListener("resize",c),window.removeEventListener("scroll",c))},{immediate:!0}),v.onUnmounted(()=>{u.disconnect(),window.removeEventListener("resize",c),window.removeEventListener("scroll",c)}),()=>{var s;return v.createVNode(v.Fragment,null,[n.value&&v.createVNode("div",v.mergeProps({ref:f,class:"s-base-popover"},o),[r.value&&v.createVNode("div",{class:"s-base-popover--arrow",ref:l},null),(s=e.default)==null?void 0:s.call(e)])])}}}),et=v.defineComponent({name:"GPopOver",props:xt,emits:["update:modalValue"],setup(t,{slots:e}){const{modelValue:o,title:n}=v.toRefs(t);return()=>v.createVNode(v.Fragment,null,[o.value&&v.createVNode(U,v.mergeProps({class:"s-popover"},t),{default:()=>{var a;return[v.createVNode("h4",{class:"s-popover-title"},[n.value]),(a=e.default)==null?void 0:a.call(e)]}})])}}),Ht={install(t){t.component(et.name,et),t.component(U.name,U)}};D.BasePopover=U,D.Popover=et,D.default=Ht,Object.defineProperties(D,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
